(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{107:function(e,t,n){},108:function(e,t,n){},138:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),i=n(10),r=n.n(i),s=(n(107),n(108),n(22)),o=n(187),l=n(189),d=n(92),u=n(184),j=n(12),b=n(3),h=Object(u.a)((function(e){return{root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:Object(s.a)({flexGrow:1,display:"none"},e.breakpoints.up("sm"),{display:"block"}),search:Object(s.a)({position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:Object(j.a)(e.palette.common.white,.15),"&:hover":{backgroundColor:Object(j.a)(e.palette.common.white,.25)},marginLeft:0,width:"100%"},e.breakpoints.up("sm"),{marginLeft:e.spacing(1),width:"auto"}),searchIcon:{padding:e.spacing(0,2),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},inputRoot:{color:"inherit"},inputInput:Object(s.a)({padding:e.spacing(1,1,1,0),paddingLeft:"calc(1em + ".concat(e.spacing(4),"px)"),transition:e.transitions.create("width"),width:"100%"},e.breakpoints.up("sm"),{width:"12ch","&:focus":{width:"20ch"}})}}));function p(){var e=h();return Object(b.jsx)("div",{className:e.root,children:Object(b.jsx)(o.a,{position:"static",children:Object(b.jsx)(l.a,{children:Object(b.jsx)(d.a,{className:e.title,variant:"h6",noWrap:!0,children:"Leader-Board Application"})})})})}var m=n(21),O=n(5),f=n(198),x=n(200),v=n(196),g=n(199),y=n(197),U=n(86),C=n.n(U),w="ADD_USER",E="UPDATE_USER",S="DELETE_USER",k="GET_USERS",P="STOP_FETCHING_USERS",M="RESET";var I=n(201),L=n(28);function N(e){L.b.error(e?e.response.data:"Something went wrong")}var T=n(82),D=n.n(T),W=function(e){var t=e.url,n=e.method,a=e.data;return D()({method:n,url:t,data:a})},F=n(41),_=n(15),R=n(190),Y=n(194),A=n(206),z=n(193),H=n(191),K=n(192),B=c.a.forwardRef((function(e,t){return Object(b.jsx)(R.a,Object(_.a)({direction:"down",ref:t},e))}));var G=function(e){var t=e.fullScreen,n=void 0!==t&&t,a=e.disabled,c=void 0!==a&&a,i=e.loading,r=void 0!==i&&i,s=e.open,o=e.showAction,l=void 0===o||o,d=e.handleSubmit,u=e.handleClose,j=e.title,h=void 0===j?"Are you Sure ?":j,p=e.children,m=e.action,O=void 0===m?"Confirm":m,f=e.cancel,x=void 0===f?"Cancel":f;return Object(b.jsxs)(A.a,{open:s,onClose:u,fullWidth:!0,fullScreen:n,TransitionComponent:B,children:[Object(b.jsx)(H.a,{children:h}),p&&Object(b.jsx)(K.a,{children:p}),Object(b.jsxs)(z.a,{children:[Object(b.jsx)(Y.a,{disabled:r,onClick:u,size:"small",variant:"outlined",color:"primary",children:x}),l&&Object(b.jsx)(Y.a,{disabled:r||c,onClick:d,size:"small",variant:"contained",color:"secondary",children:O})]})]})},J=n(85),q=n.n(J),Q=n(204),V=n(195),X=n(84),Z=n.n(X),$=n(83),ee=n.n($),te=n(36),ne=n.n(te);var ae=function(e){var t=e.date;return Object(b.jsxs)("div",{className:"text-center",children:[Object(b.jsx)("span",{children:ne()(t).format("DD-MM-YYYY")}),Object(b.jsx)("br",{}),Object(b.jsx)("span",{children:ne()(t).format("hh:mm:ss a")})]})};var ce=function(e){var t=e.user,n=e.fieldKey,a=e.showEdit,c=e.i,i=e.preUpdateUser,r=e.userId,o=e.field,l=e.setField,d=e.undoPreUpdateUser,u=e.updateUser,j=e.label,h=e.type,p=e.loading;return Object(b.jsxs)("div",{className:"flex justify-between items-center",children:[Object(b.jsxs)("div",{children:[r===t._id&&o[n]&&Object(b.jsx)("div",{className:"absolute bg-color-absolute",children:Object(b.jsx)(Q.a,{disabled:p,style:{maxWidth:277},type:h,label:j,name:n,value:"datetime-local"===h?ne()(o[n]).format("YYYY-MM-DDTHH:mm:ss"):o[n],onChange:function(e){var t=e.target,n=t.name,a=t.value;return l(Object(s.a)({},n,a))},InputProps:{endAdornment:Object(b.jsxs)(V.a,{position:"end",children:[Object(b.jsx)(ee.a,{className:"cursor-pointer",onClick:u,color:"primary"}),Object(b.jsx)(Z.a,{className:"cursor-pointer",onClick:d,color:"secondary"})]})},InputLabelProps:["datetime-local","number"].includes(h)?{shrink:!0}:{}})}),"datetime-local"===h?Object(b.jsx)(ae,{date:t.date}):t[n]]}),Object(b.jsx)("div",{children:a.ind===c&&a.name===n&&Object(b.jsx)(q.a,{disabled:p,className:"cursor-pointer",size:"small",onClick:function(){return i(t._id,n,t[n])}})})]})},ie=Object(O.a)((function(e){return{head:{backgroundColor:e.palette.common.black,color:e.palette.common.white,textAlign:"center"},body:{fontSize:14},root:{maxHeight:50,minHeight:50,"&:nth-child(1)":{minWidth:60,maxWidth:60},"&:nth-child(2)":{minWidth:120,maxWidth:120},"&:nth-child(3)":{minWidth:100,maxWidth:100},"&:nth-child(4)":{minWidth:140,maxWidth:140},"&:nth-child(5)":{minWidth:100,maxWidth:100},"&:nth-child(6)":{minWidth:100,maxWidth:100},"&:nth-child(7)":{minWidth:75,maxWidth:75}}}}))(v.a),re=Object(O.a)((function(e){return{root:{"&:nth-of-type(odd)":{backgroundColor:e.palette.action.hover}}}}))(y.a);var se=function(e){var t=e.users,n=e.fetchMore,c=e.fetchingUsers,i=Object(F.b)(),r=Object(a.useState)(-1),o=Object(m.a)(r,2),l=o[0],u=o[1],j=Object(a.useState)({ind:-1,name:""}),h=Object(m.a)(j,2),p=h[0],O=h[1],v=Object(a.useState)(!1),U=Object(m.a)(v,2),w=U[0],k=U[1],P=Object(a.useState)(!1),M=Object(m.a)(P,2),T=M[0],D=M[1],_=Object(a.useState)(!1),R=Object(m.a)(_,2),Y=R[0],A=R[1],z=Object(a.useState)(null),H=Object(m.a)(z,2),K=H[0],B=H[1],J=Object(a.useState)({}),q=Object(m.a)(J,2),Q=q[0],V=q[1],X=function(){A(!0),W({url:"/api/updateUser/".concat(K),method:"PUT",data:Q}).then((function(){L.b.success("User Updated Successfully"),i({type:E,payload:{_id:K,field:Q}}),B(null),V({})})).catch(N).finally((function(){A(!1)}))},Z=function(e,t,n){B(e),V(Object(s.a)({},t,n))},$=function(){B(null),V({})};return Object(b.jsxs)("div",{className:"full-height",children:[Object(b.jsxs)(f.a,{"aria-label":"customized table",className:"mb-1",children:[Object(b.jsx)(g.a,{children:Object(b.jsxs)(y.a,{children:[Object(b.jsx)(ie,{children:"#"}),Object(b.jsx)(ie,{children:"Participants"}),Object(b.jsx)(ie,{children:"Location"}),Object(b.jsx)(ie,{children:"Date"}),Object(b.jsx)(ie,{children:"Units"}),Object(b.jsx)(ie,{children:"Type"}),Object(b.jsx)(ie,{children:"Points"})]})}),Object(b.jsx)(x.a,{children:t.map((function(e,t){return Object(b.jsxs)(re,{onMouseLeave:function(){return u(-1)},onMouseEnter:function(){return u(t)},children:[Object(b.jsx)(ie,{component:"th",scope:"row",align:"center",onMouseEnter:function(){return u(t)},children:t===l?Object(b.jsx)(I.a,{disabled:Y||T,color:"secondary","aria-label":"delete",size:"small",onClick:function(){return t=e._id,B(t),void k(!0);var t},children:Object(b.jsx)(C.a,{})}):t+1}),Object(b.jsx)(ie,{component:"th",scope:"row",onMouseEnter:function(){return O({ind:t,name:"name"})},onMouseLeave:function(){return O({ind:-1,name:""})},children:Object(b.jsx)(ce,{loading:Y||T,user:e,fieldKey:"name",i:t,preUpdateUser:Z,showEdit:p,userId:K,field:Q,setField:V,undoPreUpdateUser:$,updateUser:X,label:"Name",type:"text"})}),Object(b.jsx)(ie,{component:"th",scope:"row",onMouseEnter:function(){return O({ind:t,name:"location"})},onMouseLeave:function(){return O({ind:-1,name:""})},children:Object(b.jsx)(ce,{loading:Y||T,user:e,fieldKey:"location",i:t,preUpdateUser:Z,showEdit:p,userId:K,field:Q,setField:V,undoPreUpdateUser:$,updateUser:X,label:"Location",type:"text"})}),Object(b.jsx)(ie,{component:"th",scope:"row",onMouseEnter:function(){return O({ind:t,name:"date"})},onMouseLeave:function(){return O({ind:-1,name:""})},children:Object(b.jsx)(ce,{loading:Y||T,user:e,fieldKey:"date",i:t,preUpdateUser:Z,showEdit:p,userId:K,field:Q,setField:V,undoPreUpdateUser:$,updateUser:X,label:"Date",type:"datetime-local"})}),Object(b.jsx)(ie,{component:"th",scope:"row",onMouseEnter:function(){return O({ind:t,name:"units"})},onMouseLeave:function(){return O({ind:-1,name:""})},children:Object(b.jsx)(ce,{loading:Y||T,user:e,fieldKey:"units",i:t,preUpdateUser:Z,showEdit:p,userId:K,field:Q,setField:V,undoPreUpdateUser:$,updateUser:X,label:"Units",type:"text"})}),Object(b.jsx)(ie,{component:"th",scope:"row",onMouseEnter:function(){return O({ind:t,name:"type"})},onMouseLeave:function(){return O({ind:-1,name:""})},children:Object(b.jsx)(ce,{loading:Y||T,user:e,fieldKey:"type",i:t,preUpdateUser:Z,showEdit:p,userId:K,field:Q,setField:V,undoPreUpdateUser:$,updateUser:X,label:"Type",type:"text"})}),Object(b.jsx)(ie,{component:"th",scope:"row",onMouseEnter:function(){return O({ind:t,name:"points"})},onMouseLeave:function(){return O({ind:-1,name:""})},children:Object(b.jsx)(ce,{loading:Y||T,user:e,fieldKey:"points",i:t,preUpdateUser:Z,showEdit:p,userId:K,field:Q,setField:V,undoPreUpdateUser:$,updateUser:X,label:"Points",type:"number"})})]},t)}))})]}),c?"fetching...":Object(b.jsx)(d.a,{className:"cursor-pointer decent-padding button",gutterBottom:!0,variant:"caption",color:"primary",children:"Fetch more",onClick:n}),Object(b.jsx)(G,{loading:T,open:w,handleClose:function(){return k(!1)},handleSubmit:function(){D(!0),W({url:"/api/deleteUser/".concat(K),method:"DELETE"}).then((function(e){var t=e.data;L.b.success(t),i({type:S,payload:K}),B(null),k(!1)})).catch(N).finally((function(){D(!1)}))},action:"Yes",cancel:"No"})]})};var oe=function(e){var t=e.error,n=e.label,a=e.name,c=e.value,i=e.onChange,r=e.type,s=void 0===r?"text":r;return Object(b.jsx)(b.Fragment,{children:Object(b.jsx)(Q.a,{fullWidth:!0,margin:"normal",type:s,error:!!t,label:n,helperText:t,variant:"filled",name:a,value:c,onChange:i,InputLabelProps:"datetime-local"===s?{shrink:!0}:{}})})};var le=function(e){var t=e.form,n=e.handleChange;return Object(b.jsxs)("div",{children:[Object(b.jsx)(oe,{label:"Name",name:"name",value:t.name,onChange:n}),Object(b.jsx)(oe,{label:"Location",name:"location",value:t.location,onChange:n}),Object(b.jsx)(oe,{label:"Units",name:"units",value:t.units,onChange:n}),Object(b.jsx)(oe,{label:"Date",type:"datetime-local",name:"date",value:t.date,onChange:n}),Object(b.jsx)(oe,{label:"Type",name:"type",value:t.type,onChange:n}),Object(b.jsx)(oe,{label:"Points",type:"number",name:"points",value:t.points,onChange:n})]})},de=n(202),ue=n(87),je=n.n(ue),be={name:"",location:"",date:ne()().format("YYYY-MM-DDTHH:mm"),units:"",type:"",points:0};var he=function(){var e=Object(F.b)(),t=Object(F.c)((function(e){return e.user})),n=t.users,c=t.canFetch,i=t.skip,r=t.limit,o=Object(a.useState)(!1),l=Object(m.a)(o,2),u=l[0],j=l[1],h=Object(a.useState)(!0),p=Object(m.a)(h,2),O=p[0],f=p[1],x=Object(a.useState)(!1),v=Object(m.a)(x,2),g=v[0],y=v[1],U=Object(a.useState)(Object(_.a)({},be)),C=Object(m.a)(U,2),E=C[0],S=C[1],M=function(){c||L.b.info("all users are fetched..."),c&&W({url:"/api/users?skip=".concat(i,"&limit=").concat(r),method:"GET"}).then((function(t){var a=t.data;a.length<10&&e({type:P}),e({type:k,payload:{users:a,skip:n.length+a.length,limit:a.length}})})).catch(N).finally((function(){return f(!1)}))};return Object(a.useEffect)((function(){M()}),[]),Object(b.jsxs)("div",{className:"max-width-sm m-auto",children:[Object(b.jsxs)("div",{className:"mt-2 flex items-center justify-between mb-1",children:[Object(b.jsx)(d.a,{children:"Leader-Board Participants",color:"secondary",variant:"h4"}),Object(b.jsx)(I.a,{color:"primary","aria-label":"add user",size:"small",onClick:function(){return j(!0)},children:Object(b.jsx)(je.a,{})})]}),O?Object(b.jsx)("div",{className:"absolute",children:Object(b.jsx)(de.a,{})}):Object(b.jsx)(se,{users:n,fetchMore:M,fetchingUsers:O}),Object(b.jsx)(G,{loading:g,open:u,handleClose:function(){return j(!1)},handleSubmit:function(){y(!0);var t=Object(_.a)(Object(_.a)({},E),{},{date:ne()(E.date).toDate()});W({url:"/api/createUser",method:"POST",data:t}).then((function(t){var n=t.data;L.b.success("User Created Successfully"),e({type:w,payload:n}),j(!1)})).catch(N).finally((function(){y(!1)}))},action:"Save",title:"ADD PARTICIPANT",children:Object(b.jsx)(le,{form:E,handleChange:function(e){var t=e.target,n=t.name,a=t.value;S((function(e){return Object(_.a)(Object(_.a)({},e),{},Object(s.a)({},n,a))}))}})})]})},pe=n(11),me=n(203);var Oe=function(){return Object(b.jsxs)("div",{className:"full-height",children:[Object(b.jsx)(me.a,{}),Object(b.jsx)(p,{}),Object(b.jsx)("main",{className:"body-wrapper",children:Object(b.jsxs)(pe.d,{children:[Object(b.jsx)(pe.b,{path:"/users",exact:!0,component:he}),Object(b.jsx)(pe.b,{render:function(){return Object(b.jsx)(pe.a,{to:"/users"})}})]})})]})},fe=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,207)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,i=t.getLCP,r=t.getTTFB;n(e),a(e),c(e),i(e),r(e)}))},xe=n(69),ve=n(37),ge=n(89),ye=n(90),Ue={users:[],canFetch:!0,skip:0,limit:10},Ce=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ue,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case k:return t.payload.users.map((function(t){-1===e.users.findIndex((function(e){return e._id===t._id}))&&e.users.push(t)})),Object(_.a)(Object(_.a)({},e),{},{skip:t.payload.skip,limit:t.payload.limit});case w:return Object(_.a)(Object(_.a)({},e),{},{users:[].concat(Object(ye.a)(e.users),[t.payload])});case E:var n=e.users.findIndex((function(e){return e._id===t.payload._id}));return Object.keys(t.payload.field).map((function(a){e.users[n][a]=t.payload.field[a]})),e;case S:return Object(_.a)(Object(_.a)({},e),{},{users:e.users.filter((function(e){return e._id!==t.payload}))});case P:return Object(_.a)(Object(_.a)({},e),{},{canFetch:!1});case M:return Object(_.a)({},Ue);default:return e}},we=function(){return Object(ve.c)({user:Ce})};ve.a.REPLACE="@@redux/INIT";var Ee=(0,ve.d)(Object(ve.b)(ge.a)),Se=Object(ve.e)(we(),Ee);n(137);r.a.render(Object(b.jsxs)(F.a,{store:Se,children:[Object(b.jsx)(xe.a,{children:Object(b.jsx)(Oe,{})}),Object(b.jsx)(L.a,{position:"bottom-right",draggable:!0})]}),document.getElementById("root")),fe()}},[[138,1,2]]]);
//# sourceMappingURL=main.9d0dec58.chunk.js.map